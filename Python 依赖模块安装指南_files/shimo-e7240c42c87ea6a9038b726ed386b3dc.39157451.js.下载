(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1204:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1518),o=r(2169);e.delay=o.delay,e.uuid=function(){return n.v4().replace(/-/g,"")},e.version="0.19.27",function(t){t.NEW_CHANGE="newEditorChange",t.NEW_CHANGE_SAVED_TO_STORAGE="newEditorChangeSavedToStorage",t.NEW_CHANGE_SAVE_TO_STORAGE_FAILED="newEditorChangeSaveToStorageFailed",t.SERVER_CHANGE_APPLIED="serverChangeApplied",t.SERVER_CHANGE_PROCESSED="serverChangeProcessed",t.ACCEPT="accept",t.ACCEPT_COMMIT="acceptCommit",t.ACCEPT_FAILED="acceptFailed",t.WAITING_FOR_CAN_HANDLE_SERVER_CHANGES="waitingForCanHandleServerChanges",t.BEFORE_SEND_REQUEST="beforeSendRequest",t.SEND_REQUEST_DONE="sendRequestDone",t.SEND_REQUEST_FAILED="sendRequestFailed",t.BEFORE_APPLY_CHANGE="beforeApplyChange",t.CHANGE="change",t.CHANGES="changes",t.SAVE_STATUS_CHANGE="saveStatusChange",t.COLLABORATOR="collaborator",t.EXTERNAL_CHANGES="external",t.SHIMO_SCRIPTS="shimoScripts",t.CHANGES_PENDING="delta_pending",t.ENTER="enter",t.LEAVE="leave",t.SELECT="select",t.FILE_META="fileMeta",t.BROADCAST="broadcast",t.ERROR="error",t.WARNING="warning",t.NETWORK_CHANGE="networkChange",t.TRACK="track",t.OPEN="open",t.ON_VISIBLE="onVisible"}(e.Event||(e.Event={})),function(t){t.NETWORK_STATUS_OFFLINE="networkStatusOffline",t.SAVE_STATUS_INIT_OFFLINE="saveStatusInitOffline",t.SAVE_STATUS_REQ_TIMEDOUT="saveStatusRequestTimedout",t.SAVE_STATUS_NETWORK_OFFLINE="saveSatstusNetworkChangeOffline"}(e.STATUS_CHANGE||(e.STATUS_CHANGE={})),e.debounce=function(t,e,r){var n;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new Promise((function(a){var i=r&&!n;clearTimeout(n),n=setTimeout((function(){n=null,r||a(t.apply(void 0,o))}),e),i&&a(t.apply(void 0,o))}))}},e.colors=["#A69ACA","#EC6E79","#F39801","#00A496","#FFD900","#674599","#83D4E7","#AF7C4F","#B8D200","#9D5B8B","#F15B1C","#41464B","#CD9F00","#47885E","#D7003B","#436EC9","#F897C7","#9C4109","#6E7A56","#83D4E7","#83609C","#F8DCDB","#E7C39C","#87B151","#9E0038","#B09FC9","#7DCFC8","#BEE7F0","#CD9F00","#CBAAC2","#F5C5C9","#CD8C28","#1A5A52","#9EB4E1","#406619","#CAB738","#F6C751","#8D699D","#613A14","#189DEC"],e.last=function(t){if(0!==t.length)return t[t.length-1]};var a=function(t,r,n){this.message="Unknown error",this.code="ERR_UNKNOWN",this.version=e.version,this.message=t,this.code=r,n&&(this.origin=n,this.originStatus=n.status?String(n.status):"UnknownStatus",this.stack=n.message+n.stack)};e.CollaborationError=a,e.ERROR={ERR_CHANGE_NOT_CONTINUOUS:"ERR_CHANGE_NOT_CONTINUOUS",ERR_ASSERTION:"ERR_ASSERTION",ERR_FN_INVOKE:"ERR_FN_INVOKE",ERR_PULL:"ERR_PULL",ERR_SENDER:"ERR_SENDER",ERR_FILE_TOO_LARGE:"ERR_FILE_TOO_LARGE",ERR_APPLY_CHANGE:"ERR_APPLY_CHANGE",ERR_STORAGE_SET:"ERR_STORAGE_SET",ERR_PULL_4XX:"ERR_PULL_4XX",ERR_DISCONTINUOUS:"ERR_DISCONTINUOUS",ERR_DELTA_VERSION:"ERR_DELTA_VERSION"},e.noop=function(){},e.setReadonly=function(t){"function"==typeof t.disable&&t.disable(),"function"==typeof t.updateOptions&&t.updateOptions({editable:!1})},e.setEditable=function(t){"function"==typeof t.enable&&t.enable(),"function"==typeof t.updateOptions&&t.updateOptions({editable:!0})};e.shorten=function(t){return t.length<30?t:t.slice(0,30)+"…(length="+t.length+")"};var i="undefined"!=typeof location;function s(t){0===t.indexOf("blob:")&&(t=t.slice(5));var e=t.indexOf("//"),r=t.slice(e+2).indexOf("/");return-1===r?t:t.slice(0,e+2+r)}e.modifyUrl=function(t){return 0===t.indexOf("http://")||0===t.indexOf("https://")?t:i?location.origin&&"blob://"!==location.origin?location.origin+t:s(location.href.slice(5))+t:t},e.getOriginFromHref=s,e.deltaLength=function(t){return t.ops.reduce((function(t,e){switch(e.action){case"insert":return t+e.length;case"retain":return t;case"remove":return t-e.data}}),0)}},1355:function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r(2181);e.clone=function(t){return"object"!=typeof t||null===t?t:o(t,(function(t){if("object"==typeof t&&t&&"function"==typeof t.clone)return t.clone()}))},e.freeze=function(t){return t},e.isFrozen=function(t){return!1};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ops=e,this.index=0,this.offset=0}return n(t,[{key:"hasNext",value:function(){return this.peekLength()<1/0}},{key:"next",value:function(t){t||(t=1/0);var e=this.ops[this.index];if(!e)return null;var r=this.offset,n=e.length;if(0===r&&n===t)return this.index+=1,e;t>=n-r?(t=n-r,this.index+=1,this.offset=0):this.offset+=t;var o={action:e.action,attributes:e.attributes};switch(e.action){case"remove":o.data=t;break;case"retain":if("number"==typeof e.data)o.data=t;else{if("string"==typeof e.data)throw new Error("retain with a string is not allowed");o.data=e.data}break;case"insert":"string"==typeof e.data?o.data=e.data.substr(r,t):"number"==typeof e.data?o.data=t:o.data=e.data}return e.createInstance(o)}},{key:"peekLength",value:function(){var t=this.ops[this.index];return t?t.length-this.offset:1/0}},{key:"peekAction",value:function(){var t=this.ops[this.index];return t?t.action:"retain"}}]),t}();e.OperatorIterator=a,e.parsePosition=function(t){for(var e=0,r=0,n=0;n<t.length;n++){var o=t[n].charCodeAt(0);if(o>=65&&o<=90)r=26*r+o-64;else{if(!(o>=48&&o<=57))throw new Error("Invalid cell position "+t);e=10*e+o-48}}return{row:e-1,col:r-1}},e.stringifyPosition=function(t,e){if(!(t>=0&&e>=0))throw new Error("Invalid cell position "+t+":"+e);for(var r=e+1,n="";r>0;){var o=(r-1)%26;n=String.fromCharCode(65+o)+n,r=Math.floor((r-o)/26)}return n+(t+1)}},1382:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.deltaConstructor=t,this.operatorConstructor=e}return t.prototype.compose=function(t,e,r){throw new Error("#compose() is not implemented")},t.prototype.transform=function(t,e,r){throw new Error("#transform() is not implemented")},t.prototype.invert=function(t,e){throw new Error("#invert() is not implemented")},t.prototype.parse=function(t){throw new Error("#parse() is not implemented")},t.prototype.pack=function(t,e){throw new Error("#pack() is not implemented")},t.prototype.toJSON=function(t){throw new Error("#toJSON() is not implemented")},t.prototype.explain=function(t,e){return""+t+e},t}();e.default=n},1438:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1676);e.Delta=n.Delta;var o=r(1678);e.Pool=o.default},1439:function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PUSHED=0]="PUSHED",t[t.MERGED=1]="MERGED",t[t.REORDERED=2]="REORDERED"}(n=e.PushResult||(e.PushResult={}));var o=function(){function t(t){void 0===t&&(t=[]),this.stringified=!1,this.ops=t}return t.prototype.push=function(t){if(this.stringified)throw new Error("Cannot push new operators to a stringified operatorList");var e=this.ops.length;if(0===e)return this.ops.push(t),n.PUSHED;var r=n.PUSHED,o=this.ops[e-1];if("remove"===o.action&&"insert"===t.action&&(e-=1,o=this.ops[e-1],r=n.REORDERED,void 0===o))return this.ops.unshift(t),r;var a=o.merge(t);return a?(this.ops[e-1]=a,r=n.MERGED):e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),r},t.prototype.stringify=function(t){void 0===t&&(t=!1),this.stringified=!0;for(var e=this.ops.length,r="",n=0;n<e;n++){var o=this.ops[n];(!t||n<e-1||!o.isEmpty())&&(r+=o.stringify())}return r},t}();e.default=o},1440:function(t,e,r){"use strict";var n=r(1684),o=r(2180);e.Attribute=r(1441),e.Delta=r(1442);var a={TableOperator:r(2195),CellOperator:r(1693),TextOperator:r(2198),Operator:r(1443)};n(e,a),e.pack=function(t){if("function"==typeof t.toJSON)return JSON.stringify(t);throw new Error("Only delta can be packed")},e.unpack=function(t){return e.Delta.unpack(JSON.parse(t))},e.print=function(t){t.print(!0)};var i=o(Object.keys(a),(function(t,e){var r=a[e];return t[r.packId]=r,t}),{});function s(t){var e=t[0].toString(),r=e[e.length-1];return i[e.slice(0,e.length-1)].unpack([r,t[1],t[2]])}e.Delta.operatorUnpacker=s,Object.keys(a).forEach((function(t){a[t].operatorUnpacker=s}));var u=r(1355);e.parsePosition=u.parsePosition,e.stringifyPosition=u.stringifyPosition},1441:function(t,e,r){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=[{name:"color"},{name:"background"},{name:"font-size"},{name:"width"},{name:"height"},{name:"rowspan"},{name:"colspan"},{name:"align",values:["left","center","right","justify"]},{name:"bold",values:[!1,!0]},{name:"italic",values:[!1,!0]},{name:"underline",values:[!1,!0]},{name:"vertical",values:["top","middle","bottom"]},{name:"strike",values:[!1,!0]},{name:"wrap",values:["text-wrap","text-no-wrap","text-linebreak-overflow"]},{name:"fixedRowsTop"},{name:"fixedColumnsLeft"},{name:"link"},{name:"format",values:["normal","0,0","0,0.00","0%","0.00%","0.00E+00","(0,0)","(0,0.00)","¥0,0","¥0,0.00","$0,0","$0,0.00","YYYY/MM/DD","YYYY-MM-DD","HH:mm:ss","YYYY/MM/DD HH:mm:ss","¥ (#,##0)","¥ (#,##0.00)","@","#,##0.0_);[Red](#,##0.0)","#,##0.0_);(#,##0.0)","#,##0.0;[Red]#,##0.0","#,##0.0_ ","#,##0.0_ ;[Red]-#,##0.0 ","#,##0_);[Red](#,##0)","#,##0_);(#,##0)","#,##0;[Red]#,##0","#,##0_ ","#,##0_ ;[Red]-#,##0 ","0.0_);[Red](0.0)","0.0_);(0.0)","0.0;[Red]0.0","0.0_ ","0.0_ ;[Red]-0.0 ","0_);[Red](0)","0_);(0)","0;[Red]0","0_ ","0_ ;[Red]-0 ","0.0%",'"$"#,##0.0_);[Red]("$"#,##0.0)','"¥"#,##0.0_);[Red]("¥"#,##0.0)','"$"#,##0.0_);("$"#,##0.0)','"¥"#,##0.0_);("¥"#,##0.0)','"$"#,##0.0;[Red]"$"#,##0.0','"¥"#,##0.0;[Red]"¥"#,##0.0','"$"#,##0.0','"¥"#,##0.0','"$"#,##0.0;[Red]-"$"#,##0.0','"¥"#,##0.0;[Red]-"¥"#,##0.0','"$"#,##0_);[Red]("$"#,##0)','"¥"#,##0_);[Red]("¥"#,##0)','"$"#,##0_);("$"#,##0)','"¥"#,##0_);("¥"#,##0)','"$"#,##0;[Red]"$"#,##0','"¥"#,##0;[Red]"¥"#,##0','"$"#,##0','"¥"#,##0','"$"#,##0;[Red]-"$"#,##0','"¥"#,##0;[Red]-"¥"#,##0','_("$"* #,##0.0_);_("$"* (#,##0.0);_("$"* "-"??_);_(@_)','_("¥"* #,##0.0_);_("¥"* (#,##0.0);_("¥"* "-"??_);_(@_)','_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)','_("¥"* #,##0_);_("¥"* (#,##0);_("¥"* "-"_);_(@_)',"yyyy/m/d","yyyy/mm/dd;@","yyyy-mm-dd;@","yy/mm/dd;@","yy-mm-dd;@","mm/dd;@","mm-dd;@","yyyy-m-d;@","yy/m/d;@","yy-m-d;@","m/d;@","m-d;@","m/d/yy;@","mm/dd/yy;@","d;@","dd;@",'yyyy"年"m"月"d"日" aaaa','yyyy"年"m"月"d"日";@','yyyy"年"m"月";@','m"月"d"日";@','[$-804]yyyy"年"mm"月"dd"日" aaaa;@','yyyy"年"mm"月"dd"日";@','yyyy"年"mm"月";@','mm"月"dd"日";@','m"月";@','mm"月";@','[DBNum1][$-804]m"月";@',"[$-804]aaaa;@","[$-804]aaa;@",'[DBNum1][$-804]yyyy"年"m"月"d"日";@','[DBNum1][$-804]yyyy"年"m"月";@','[DBNum1][$-804]m"月"d"日";@',"[$-409]d-mmm;@","[$-409]d-mmm-yy;@","[$-409]dd-mmm-yy;@","[$-409]mmm-yy;@","[$-409]mmmm-yy;@","[$-409]mmmmm;@","[$-409]mmmmm-yy;@","[$-409]yyyy/mm/dd h:mm AM/PM;@","yyyy/mm/dd hh:mm;@","[$-409]yyyy/m/d h:mm AM/PM;@","yyyy/m/d h:mm;@","[$-409]yyyy/mm/dd h:mm:ss AM/PM;@","yyyy/mm/dd hh:mm:ss;@","[$-409]yyyy/m/d h:mm:ss AM/PM;@","yyyy/m/d h:mm:ss;@","h:mm:ss;@","h:mm;@","AM/PM h:mm:ss",'上午/下午h"时"mm"分"ss"秒";@','上午/下午h"时"mm"分";@','[DBNum1][$-804]h"时"mm"分";@','[DBNum1][$-804]上午/下午h"时"mm"分";@',"[$-409]h:mm AM/PM;@","[$-409]h:mm:ss AM/PM;@",'h"时"mm"分";@','h"时"mm"分"ss"秒";@',"# ?/?","# ??/??","# ???/???","# ?/2","# ?/4","# ?/8","# ??/16","# ?/10","# ??/100","0.0E+00","0E+00","000000","[DBNum1][$-804]General","[DBNum2][$-804]General"]},{name:"formula"},{name:"filter"},{name:"border-top"},{name:"border-right"},{name:"border-bottom"},{name:"border-left"},{name:"line"},{name:"guid"},{name:"author"},{name:"size"},{name:"list"},{name:"layout",values:["embed","block"]},{name:"margin",values:["none","small","medium","large"]},{name:"font",values:["serif","monospace","microsoftyahei","simsun","kaiti","simhei","fangsong","droid","source","arial","notosans","notoserif","timesnewroman","fzcchk","fzfsk","fzhtk","fzktk","fzlsk","fzssk","fzxbsk"]},{name:"header"},{name:"indent"},{name:"comment"},{name:"comment-block"},{name:"code-block",values:[!0].concat(["1c","accesslog","actionscript","ada","apache","applescript","arduino","armasm","asciidoc","aspectj","abnf","autohotkey","autoit","avrasm","awk","bnf","bash","basic","brainfuck","cal","cs","cpp","cos","capnproto","ceylon","clean","clojure","clojure-repl","cmake","coffeescript","coq","crmsh","crystal","csp","css","d","dart","delphi","dts","diff","django","dns","dockerfile","dos","dsconfig","dust","elixir","elm","erb","erlang","erlang-repl","excel","ebnf","fsharp","fix","flix","fortran","gcode","gams","gauss","gherkin","glsl","go","golo","gradle","groovy","haml","handlebars","haskell","haxe","hsp","xml","htmlbars","http","hy","inform7","x86asm","irpf90","java","javascript","jboss-cli","json","julia","julia-repl","kotlin","lasso","ldif","leaf","less","lisp","livecodeserver","livescript","llvm","lsl","lua","makefile","markdown","mathematica","matlab","maxima","mel","mercury","axapta","routeros","mipsasm","mizar","mojolicious","monkey","moonscript","n1ql","nginx","nimrod","nix","nsis","objectivec","ocaml","openscad","ruleslanguage","oxygene","parser3","perl","pf","php","pony","powershell","processing","prolog","protobuf","puppet","purebasic","python","profile","q","qml","r","rib","rsl","roboconf","ruby","rust","scala","scheme","scilab","scss","shell","smali","smalltalk","sml","sqf","sql","stan","stata","step21","stylus","subunit","swift","taggerscript","tcl","tap","tex","thrift","ini","tp","twig","typescript","vala","vbnet","vbscript","vbscript-html","verilog","vhdl","vim","xl","xquery","yaml","zephir","plain"])},{name:"cellValue"},{name:"precision"},{name:"autoFormatter",values:["#,##0_);[Red](#,##0)","#,##0.00_);[Red](#,##0.00)",'"¥"#,##0_);[Red]("¥"#,##0)','"¥"#,##0.00_);[Red]("¥"#,##0.00)','"$"#,##0_);[Red]("$"#,##0)','"$"#,##0.00_);[Red]("$"#,##0.00)',"0%","0.00%","# ??/??","0.00E+00","yyyy/m/d",'m"月"d"日";@','yyyy"年"m"月"d"日";@','yyyy"年"m"月";@',"[$-409]yyyy/mm/dd h:mm:ss AM/PM;@","[$-409]yyyy/mm/dd h:mm AM/PM;@","yyyy/mm/dd hh:mm:ss;@","h:mm;@","[$-409]h:mm AM/PM;@","h:mm:ss;@","[$-409]h:mm:ss AM/PM;@",'h"时"mm"分";@','h"时"mm"分"ss"秒";@','[$-804]AM/PMh"时"mm"分";@','[$-804]AM/PMh"时"mm"分"ss"秒";@',"[$-409]mmm-yy;@","h:mm:ss.0;@","[$-409]h:mm:ss.0 AM/PM;@","yyyy/mm/dd hh:mm;@","yyyy/mm/dd hh:mm:ss.0;@","yyyy/m;@"]},{name:"baseContentLength"}],a=o.reduce((function(t,e,r){return e.index=r,t[e.name]=e,t}),{});t.exports={BASE_CONTENT_LENGTH:"baseContentLength",pack:function(t){if("object"==typeof t&&null!==t){var e=[];for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(void 0!==n){var o=a[r];if(o&&(r=o.index,o.values&&null!==n)){var i=o.values.indexOf(n);if(-1!==i)n=i;else if(17!==r)continue}e.push(null===n?r:r+":"+JSON.stringify("string"==typeof n?encodeURIComponent(n):n))}}return e.sort().join("|")}},unpack:function(t){if("string"!=typeof t)return{};for(var e={},r=t.split("|"),a=0;a<r.length;a++){var i=r[a].split(":"),s=n(i,2),u=s[0],c=s[1],l=o[u];if(c){var f=typeof(c=JSON.parse(c));"string"===f&&(c=decodeURIComponent(c)),l&&(u=l.name,l.values&&"number"===f&&void 0!==l.values[c]&&(c=l.values[c]))}else l&&(u=l.name),c=null;e[u]=c}return e},merge:function(t,e,r){if(r&&!t)return e;if(!e)return t;for(var n in t=this.unpack(t),e=this.unpack(e))e.hasOwnProperty(n)&&(t[n]=e[n],r||null!==t[n]||delete t[n]);return this.pack(t)},invert:function(t,e){if(e){if(!t)return e.split("|").map((function(t){var e=t.indexOf(":");return-1===e?t:t.slice(0,e)})).join("|");for(var r in t=this.unpack(t),e=this.unpack(e))e.hasOwnProperty(r)&&(void 0!==t[r]?e[r]=t[r]:e[r]=null);return this.pack(e)}},transform:function(t,e,r){if(r)return e;if(e){if(!t)return e;for(var n in t=this.unpack(t),e=this.unpack(e))e.hasOwnProperty(n)&&void 0!==t[n]&&delete e[n];return this.pack(e)}},diff:function(t,e){if(!t)return e;t=this.unpack(t),e&&(e=this.unpack(e));for(var r={},n=!0,o=e?Object.keys(t).concat(Object.keys(e)):Object.keys(t),a=0;a<o.length;a++){var i=o[a],s=e?e[i]:void 0;t[i]!==s&&(n=!1,r[i]=void 0===s?null:s)}return n?void 0:this.pack(r)}}},1442:function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r(1355),a=r(2182),i=r(1685),s=String.fromCharCode(0),u=r(1441),c=r(2194),l=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ops=[],Array.isArray(e)){for(var n=0;n<e.length;n++)this.pushWithMutations(e[n]);r&&this.chopWithMutations()}else"function"==typeof e&&e(this);o.freeze(this)}return n(t,[{key:"freeze",value:function(){o.freeze(this.ops)}},{key:"createCleaner",value:function(){for(var e=[],r=0;r<this.ops.length;r++){var n=this.ops[r],o=n.createInstance({action:"remove",data:n.length});e.push(o)}return new t(e)}},{key:"clone",value:function(){return new t(this.ops.map(o.clone))}},{key:"toJSON",value:function(){return this.ops}},{key:"pack",value:function(){return this.ops.map((function(t){return t.pack()}))}},{key:"isDocument",value:function(){for(var t=0;t<this.ops.length;t++)if("insert"!==this.ops[t].action)return!1;return!0}},{key:"isEmpty",value:function(){return 0===this.ops.length}},{key:"_genericPush",value:function(t,e){var r=t.length,n=t[r-1];if(n&&"remove"===n.action&&"insert"===e.action&&(n=t[(r-=1)-1]),!n)return t.unshift(e),t;var o=e.merge(n);return o?t[r-1]=o:r===t.length?t.push(e):t.splice(r,0,e),t}},{key:"push",value:function(e){if(!e.length)return this;var r=this.ops.slice(0);if(Array.isArray(e)){for(var n=!1,o=0;o<e.length;o++)e[o].length&&(n=!0,r=this._genericPush(r,e[o]));if(!n)return this}else r=this._genericPush(r,e);return new t(r)}},{key:"pushWithMutations",value:function(t){return t.length&&this._genericPush(this.ops,t),this}},{key:"concat",value:function(e){var r=this;return e.ops.length?this.ops.length?new t((function(t){t.ops=r.ops.slice(),t.pushWithMutations(e.ops[0]),e.ops.length>1&&(t.ops=t.ops.concat(e.ops.slice(1)))})):e:this}},{key:"_genericChop",value:function(t){for(;t.length&&t[t.length-1].isEmpty();)t.pop();return t}},{key:"chop",value:function(){return new t(this._genericChop(this.ops.slice(0)))}},{key:"chopWithMutations",value:function(){return this._genericChop(this.ops),this}},{key:"slice",value:function(e,r){e=e||0,"number"!=typeof r&&(r=1/0);for(var n=[],o=this.getIter(),a=0;a<r&&o.hasNext();){var i=void 0;a<e?i=o.next(e-a):(i=o.next(r-a),n.push(i)),a+=i.length}return new t(n)}},{key:"getIter",value:function(){return new o.OperatorIterator(this.ops)}},{key:"validate",value:function(){for(var t={},e=0;e<this.ops.length;e++){var r=this.ops[e];if(r&&"TableOperator"===r.name()){var n=r.getAttributes().name;if(!n)continue;var o="$$"+n+"$$";if(t.hasOwnProperty(o))throw new Error("Duplicated table name found: "+n);t[o]=!0}}return this}},{key:"isTableADocument",value:function(){for(var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=function(r){var n=t.ops[r];if(n&&"TableOperator"===n.name()&&n.data.cells.some((function(t){var e=n.data.cells.get(t);return!(!e.data||"number"==typeof e.data||"function"!=typeof e.data.isDocument)&&!1===e.data.isDocument()}),e))return{v:!1}},n=0;n<this.ops.length;n++){var o=r(n);if("object"==typeof o)return o.v}return!0}},{key:"compose",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getIter(),o=e.getIter(),a=[];n.hasNext()||o.hasNext();)if("insert"===o.peekAction())a.push(o.next());else if("remove"===n.peekAction())a.push(n.next());else{var i=Math.min(n.peekLength(),o.peekLength()),s=n.next(i),u=o.next(i);u&&"retain"!==u.action?s&&"retain"!==s.action||a.push(u):s?u?a.push(s.compose(u,r)):a.push(s):a.push(u)}var c=new t(a,!0);return r||c.validate(),c}},{key:"composePosition",value:function(t){for(var e=this.getIter(),r=0;e.hasNext()&&r<=t;){var n=e.peekLength(),o=e.peekAction();switch(e.next(),o){case"remove":if(n>t-r)return null;t-=n;continue;case"insert":t+=n}r+=n}return t}},{key:"invert",value:function(e){for(var r=this.getIter(),n=e.getIter(),o=[];n.hasNext();)if("insert"===n.peekAction()){var a=n.next(),i=a.createInstance({action:"remove",data:a.length});o.push(i)}else{if(!r.hasNext())throw new Error(this.constructor.name+" should be smaller than document");var s=Math.min(r.peekLength(),n.peekLength()),u=r.next(s),c=n.next(s);if("insert"!==u.action)throw new Error("Only document can invert deltas");"retain"===c.action?o.push(u.invert(c)):o.push(u)}return new t(o,!0)}},{key:"invertPosition",value:function(t){for(var e=this.getIter(),r=0;e.hasNext()&&r<=t;){var n=e.peekLength(),o=e.peekAction();switch(e.next(),o){case"insert":if(n>t-r)return null;t-=n;continue;case"remove":t+=n}r+=n}return t}},{key:"transform",value:function(e,r){for(var n=this.getIter(),o=e.getIter(),a=[];o.hasNext();)if("insert"!==n.peekAction()||!r&&"insert"===o.peekAction())if("insert"===o.peekAction())a.push(o.next());else{var i=Math.min(n.peekLength(),o.peekLength()),s=n.next(i),u=o.next(i);if(s&&"remove"===s.action)continue;u&&"remove"===u.action?a.push(u):s?a.push(s.transform(u,r)):a.push(u)}else{var c=n.next();a.push(c.createInstance({action:"retain",data:c.length}))}return new t(a,!0)}},{key:"transformPosition",value:function(t,e){for(var r=this.getIter(),n=0;r.hasNext()&&n<=t;){var o=r.peekLength(),a=r.peekAction();switch(r.next(),a){case"remove":t-=Math.min(o,t-n);continue;case"insert":(n<t||!e)&&(t+=o)}n+=o}return t}},{key:"toString",value:function(){for(var t="",e=0;e<this.ops.length;e++){var r=this.ops[e];if("insert"!==r.action)throw new Error("toString() called on non-document");t+="string"==typeof r.data?r.data:s}return t}},{key:"diff",value:function(e,r){if(this.ops===e.ops)return new t;if(!this.ops.length){if(!e.isDocument())throw new Error("diff() called on non-document");return e}for(var n=c(this.ops[0].createInstance,this.ops[0]),o=[],s=a(this.toString(),e.toString(),r),l=this.getIter(),f=e.getIter(),p=0,h=s.length;p<h;p++)for(var d=s[p],y=d[1].length;y>0;){var v=0;switch(d[0]){case a.INSERT:v=Math.min(f.peekLength(),y),o.push(f.next(v));break;case a.DELETE:v=Math.min(y,l.peekLength()),l.next(v),o.push(n({action:"remove",data:v}));break;case a.EQUAL:v=Math.min(l.peekLength(),f.peekLength(),y);var m=l.next(v),g=f.next(v);m.skipDiff()&&g.skipDiff()&&m.name()===g.name()||i(m.data,g.data)?o.push(n({action:"retain",data:v,attributes:u.diff(m.attributes,g.attributes)})):(o.push(g),o.push(n({action:"remove",data:v})))}y-=v}return new t(o,!0)}},{key:"print",value:function(t){this.ops.forEach((function(t){return t.print()}))}},{key:"setBaseContentLengthAttr",value:function(e){if(isNaN(e))throw new Error("baseContentLength should be a number");if(this.isEmpty())return new t([]);var r=this.ops.slice(),n=r[0],o=n.getAttributes();return o[u.BASE_CONTENT_LENGTH]=e,r[0]=n.createInstance({action:n.action,data:n.data,attributes:u.pack(o)}),new t(r)}},{key:"removeBaseContentLengthAttr",value:function(){if(this.isEmpty())return new t([]);var e=this.ops.slice(),r=e[0],n=r.getAttributes();return delete n[u.BASE_CONTENT_LENGTH],e[0]=r.createInstance({action:r.action,data:r.data,attributes:u.pack(n)}),new t(e)}},{key:"length",get:function(){for(var t=0,e=0;e<this.ops.length;e++)t+=this.ops[e].length;return t}},{key:"baseContentLength",get:function(){if(this.isEmpty())return-1;var t=this.ops[0].getAttributes();return t[u.BASE_CONTENT_LENGTH]?t[u.BASE_CONTENT_LENGTH]:-1}}],[{key:"unpack",value:function(t){var e=this;return new this(t.map((function(t){return e.operatorUnpacker(t)})))}}]),t}();l.packId=5,t.exports=l},1443:function(t,e,r){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var a=r(1442),i=r(1355).clone,s=r(1441),u=r(1355),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setWithMutations(e);var r="Operator"!==this.name()&&this.isGeneric()?this.toGeneric():this;return u.freeze(r),r}return o(t,[{key:"name",value:function(){return"Operator"}},{key:"skipDiff",value:function(){return!1}},{key:"isGeneric",value:function(){var t=4===this.constructor.packId;return"number"==typeof this.data&&!t}},{key:"toGeneric",value:function(){return new t({action:this.action,data:this.data,attributes:this.attributes})}},{key:"clone",value:function(){var t=this.createInstance(this);return t.data=i(t.data),t}},{key:"_genericSet",value:function(t){var e={action:this.action,data:this.data,attributes:this.attributes},r=!1,n=t.action;if(n&&n!==e.action){if(r=!0,"insert"!==n&&"retain"!==n&&"remove"!==n)throw new Error('Action "'+n+'" is invalid');e.action=n}var o=t.data;if(null!=o&&o!==e.data){if(r=!0,"remove"===e.action&&("number"!=typeof o||o<0))throw new Error("Expect the data of remove action to be a positive number, got "+o);e.data=o}if(null==e.data)throw new Error("Expect data to have a non-empty value, got "+e.data);var a=t.attributes;if(a){var i=typeof a;if("object"===i)if(Object.keys(a).length){var u=s.pack(a);u&&e.attributes!==u&&(r=!0,e.attributes=u)}else e.attributes&&(r=!0,delete e.attributes);else"string"===i&&e.attributes!==a&&(r=!0,e.attributes=a)}return{changed:r,op:e}}},{key:"set",value:function(t){var e=this._genericSet(t),r=e.changed,n=e.op;return r?this.createInstance(n):this}},{key:"setWithMutations",value:function(t){var e=this._genericSet(t).op;return this.action=e.action,this.data=e.data,this.attributes=e.attributes,this}},{key:"createInstance",value:function(t){return new this.constructor(t)}},{key:"toJSON",value:function(){return this.pack()}},{key:"pack",value:function(){var t=void 0;switch(this.action){case"insert":t=0;break;case"remove":t=1;break;case"retain":t=2}var e="function"==typeof this.data.pack?this.data.pack():this.data,r=[Number(""+this.constructor.packId+t),e];return this.attributes&&r.push(this.attributes),r}},{key:"getEmbedObject",value:function(){throw new Error("#getEmbedObject() not implemented")}},{key:"isEmpty",value:function(){return"retain"===this.action&&!this.attributes&&"number"==typeof this.data}},{key:"getAttributes",value:function(){return s.unpack(this.attributes)}},{key:"merge",value:function(t){if(this.name()!==t.name())return!1;var e=typeof this.data;return!(this.action!==t.action||e!==typeof t.data||"number"!==e&&"string"!==e||this.attributes!==t.attributes)&&t.set({data:t.data+this.data})}},{key:"compose",value:function(t){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==t.action)throw new Error("Only retaining operator can be composed");if(this.constructor.packId!==t.constructor.packId&&!this.isGeneric()&&!t.isGeneric())throw new Error('Failed to compose operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');var e=void 0;return e="function"==typeof this.data.compose&&t.data.constructor.packId===this.data.constructor.packId?this.data.compose(t.data):"number"==typeof this.data?t.data:this.data,(this.isGeneric()?t:this).createInstance({data:e,attributes:s.merge(this.attributes,t.attributes,"insert"!==this.action),action:this.action})}},{key:"invert",value:function(t){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.constructor.name+")");if("retain"!==t.action)throw new Error("Only retaining operator can be inverted");if(this.constructor.packId!==t.constructor.packId&&!t.isGeneric())throw new Error('Failed to invert operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');var e=void 0;return e="function"==typeof this.data.invert&&t.data.constructor.packId===this.data.constructor.packId?this.data.invert(t.data):"number"==typeof t.data?t.data:this.data,this.createInstance({data:e,attributes:s.invert(this.attributes,t.attributes),action:"retain"})}},{key:"transform",value:function(t,e){if("retain"!==this.action)throw new Error("Only retaining operator can transform other operators");if("retain"!==t.action)throw new Error("Only retaining operator can be transformd");if(this.constructor.packId!==t.constructor.packId&&!t.isGeneric()&&!this.isGeneric())throw new Error('Failed to transform operators. Expect constructor "'+t.constructor.name+'" to equal "'+this.constructor.name+'"');return(this.isGeneric()?t:this).createInstance({attributes:s.transform(this.attributes,t.attributes,e),action:"retain",data:"function"==typeof this.data.transform&&"function"==typeof t.data.transform?this.data.transform(t.data,e):t.data})}},{key:"print",value:function(){var t=[this.action+": %c"+this.name(),"color: #51c6ed"];this.attributes&&(t[0]=t[0]+"%c, %O",t.push("font-weight: normal; color: #000",this.attributes.toJS())),function t(e){"function"==typeof e.pack?e.print():"object"==typeof e&&Object.keys(e).forEach((function(r){var n=e[r];t(n)}))}(this.data)}},{key:"length",get:function(){switch(typeof this.data){case"number":return this.data;case"string":return this.data.length;default:return 1}}}],[{key:"unpack",value:function(t){var e=n(t,3),r=e[0],o=e[1],i=e[2];return new this({action:["insert","remove","retain"][r],data:Array.isArray(o)?a.unpack(o):o,attributes:i})}},{key:"insert",value:function(t,e){return new this({action:"insert",data:t,attributes:e})}},{key:"retain",value:function(t,e){return new this({action:"retain",data:t,attributes:e})}},{key:"remove",value:function(t){return new this({action:"remove",data:t})}}]),t}();c.packId=1,t.exports=c},1518:function(t,e,r){var n=r(2167),o=r(2168),a=o;a.v1=n,a.v4=o,t.exports=a},1519:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPE_PROPERTY="__MODOC_NAME__"},1520:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1679),o=r(1680),a=function(){function t(e,r){this.action=e.action;var n,o=e.data;if(null==o)throw new Error('"data" is required for an Operator');if("object"==typeof o){var a=Object.keys(o)[0],i=o[a];if("string"==typeof i)this.data=o,this.dataType=a;else{var s=t.dataHandlers[a];if(!s)throw new Error('Unsupported nested data type "'+a+'"');var u=s.pack(i,"insert"===this.action);"delta"===a&&"0:"===u?(this.data=1,this.dataType="number"):(this.data=((n={})[a]=u,n),this.dataType=a)}}else this.data=o,this.dataType=typeof o;this.packedAttributes=e.packedAttributes,this.pool=e.pool,this.packedData=r}return t.isOperator=function(t){return"function"==typeof t.getAttributes},t.registerDataHandler=function(e,r){t.dataHandlers[e]=r},t.getUnresolvedAttributes=function(t){return"function"==typeof t.getUnresolvedAttributes?t.getUnresolvedAttributes():t.getAttributes()},Object.defineProperty(t.prototype,"length",{get:function(){return"string"==typeof this.data?this.data.length:"number"==typeof this.data?this.data:1},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return"retain"===this.action&&(""===this.packedAttributes||void 0===this.packedAttributes)&&"number"==typeof this.data},t.prototype.getParsedData=function(){var e=t.dataHandlers[this.dataType];if(void 0===e)throw new Error("Unknown handler for "+this.dataType);return e.parse(this.getCustomData())},t.prototype.hasAttributes=function(){return void 0!==this.packedAttributes&&""!==this.packedAttributes},t.prototype.getAttributes=function(){return void 0!==this.pool&&this.hasAttributes()?this.pool.unpackAttributes(this.packedAttributes):{}},t.prototype.stringify=function(){if(void 0===this.packedData){var t=this.data,e=void 0;switch(this.action){case"insert":e="!";break;case"retain":e="@";break;default:e="#"}if("number"==typeof t)e+=t.toString(36)+"#";else if("string"==typeof t)e+=t.length.toString(36)+"!"+t;else{var r=this.dataType;if(void 0===r)throw new Error("ASSERT: dataType === undefined");var o=n.objectKeyToInitial[r];if(!o)throw new Error('Unsupport object data type: "'+r+'"');var a=""+o+t[r];e+=a.length.toString(36)+"@"+a}this.packedData=e}var i=void 0===this.packedAttributes?this.packedData:this.packedData+this.packedAttributes;return i.length.toString(36)+i},t.prototype.merge=function(e){if(this.action!==e.action)return null;var r=typeof this.data;if("object"===r||r!==typeof e.data)return null;var n=this.hasAttributes();if(n!==e.hasAttributes())return null;if(n)if(this.pool===e.pool){if(this.packedAttributes!==e.packedAttributes)return null}else if(!function(t,e){if(t===e)return!0;var r=Object.keys(t),n=r.length;if(n!==Object.keys(e).length)return!1;for(var o=0;o<n;o++)if(t[r[o]]!==e[r[o]])return!1;return!0}(this.getUnresolvedAttributes(),t.getUnresolvedAttributes(e)))return null;return new t({action:this.action,data:this.data+e.data,pool:this.pool,packedAttributes:this.packedAttributes})},t.prototype.getCustomData=function(){switch(typeof this.data){case"string":case"number":throw new Error("Cannot get custom data from a simple operator");default:return this.data[this.dataType]}},t.prototype.compose=function(e,r){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be composed");var n,a,i,s=!1;if(e.hasAttributes()){if(void 0===this.pool)throw new Error("this.pool is undefined when composing");var u=t.getUnresolvedAttributes(e);if(r.checkParaEnd&&u.hasOwnProperty("paraEnd")&&"string"===this.dataType)throw new Error("ParaEnd overwrite string in document");s=u.hasOwnProperty("cellValue");var c=o.merge(this.getUnresolvedAttributes(),u,!r.isDocument);a=this.pool.packAttributes(c)}else a=this.packedAttributes;if(s)n="number"===e.dataType?e.data:1;else if("number"===this.dataType)n=e.data;else if("number"===e.dataType)n=this.data;else{if(void 0===this.dataType)throw new Error('Missing "dataType" when composing '+this.data+" with "+e.data);if(this.dataType!==e.dataType)throw new Error("Expect "+e.dataType+" to equal "+this.dataType+" when composing "+this.data+" with "+e.data);var l=t.dataHandlers[this.dataType];if(void 0===l)throw new Error("Unknown handler for "+this.dataType);var f=l.compose(this.getCustomData(),e.getCustomData(),r);n="delta"===this.dataType&&"0:"===f?1:((i={})[this.dataType]=f,i)}return new t({action:this.action,data:n,pool:this.pool,packedAttributes:a})},t.prototype.transform=function(e,r){if(void 0===r&&(r=!1),"retain"!==this.action)throw new Error("Only retaining operator can transform other operators");if("retain"!==e.action)throw new Error("Only retaining operator can be transformed");var n,a,i;if("number"===this.dataType||"number"===e.dataType)n=e.data;else{if(void 0===this.dataType)throw new Error('Missing "dataType" when transforming '+this.data+" with "+e.data);if(this.dataType!==e.dataType)throw new Error("Expect "+e.dataType+" to equal "+this.dataType+" when transforming "+this.data+" with "+e.data);var s=t.dataHandlers[this.dataType];if(void 0===s)throw new Error("Unknown handler for "+this.dataType);var u=s.transform(this.getCustomData(),e.getCustomData(),r);n="delta"===this.dataType&&"0:"===u?1:((i={})[this.dataType]=u,i)}if(e.hasAttributes()){var c=o.transform(this.getUnresolvedAttributes(),t.getUnresolvedAttributes(e),r);if(void 0===e.pool)throw new Error("ASSERT: other.pool === undefined when transforming");a=e.pool.packAttributes(c)}else a="";return new t({action:this.action,data:n,pool:e.pool,packedAttributes:a})},t.prototype.invert=function(e,r){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.dataType+")");if("retain"!==e.action)throw new Error("Only retaining operator can be inverted");var n,a,i,s=!1;if(e.hasAttributes()){var u=t.getUnresolvedAttributes(e);s=u.hasOwnProperty("cellValue");var c=o.invert(this.getUnresolvedAttributes(),u);if(void 0===e.pool)throw new Error("ASSERT: other.pool === undefined when inverting");a=e.pool.packAttributes(c)}else a="";if(s)n=this.data;else if(void 0!==r)n=r;else if("number"==typeof e.data)n=e.data;else if("number"==typeof this.data&&"delta"!==e.dataType)n=this.data;else{if(void 0===this.dataType)throw new Error('Missing "dataType" when inverting '+this.data+" with "+e.data);if("number"===this.dataType&&"delta"===e.dataType){n={delta:(l=t.dataHandlers.delta).invert("0:",e.getCustomData())}}else{if(this.dataType!==e.dataType)throw new Error("Expect "+e.dataType+" to equal "+this.dataType+" when inverting "+this.data+" with "+e.data);var l;if(void 0===(l=t.dataHandlers[this.dataType]))throw new Error("Unknown handler for "+this.dataType);var f=l.invert(this.getCustomData(),e.getCustomData());n="delta"===this.dataType&&"0:"===f?1:((i={})[this.dataType]=f,i)}}return new t({data:n,action:"retain",pool:e.pool,packedAttributes:a})},t.prototype.toJSON=function(){var e,r={action:this.action};if(this.hasAttributes()&&(r.attributes=this.getAttributes()),"number"===this.dataType||"string"===this.dataType)r.data=this.data;else{var n=t.dataHandlers[this.dataType],o=this.getCustomData();r.data=((e={})[this.dataType]=n?n.toJSON(o):o,e)}return r},t.prototype.explain=function(e){void 0===e&&(e="");var r=this.stringify().length,n=e+"["+this.dataType+"("+this.action+")] #"+(r-String(r).length)+":\n";if("number"===this.dataType||"string"===this.dataType)n+=e+this.data;else{var o=t.dataHandlers[this.dataType],a=this.getCustomData();n+=o?o.explain(e+"  ",a):a}return n+"\n"+e+"PackedAttributes:"+this.packedAttributes+"\n"},t.prototype.getUnresolvedAttributes=function(){return void 0!==this.pool&&this.hasAttributes()?this.pool.unpackAttributes(this.packedAttributes,!1):{}},t.dataHandlers={},t}();e.default=a},1670:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(2164),o=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(i,s)}u((n=n.apply(t,e||[])).next())}))},a=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function i(t,e,r){return o(this,void 0,void 0,(function(){var i,s,u=this;return a(this,(function(c){switch(c.label){case 0:return r?(i=[""+n.b+r],[3,3]):[3,1];case 1:return[4,t.getAllKeys()];case 2:i=c.sent().filter((function(t){return 0===t.indexOf(""+n.b)&&0!==t.indexOf(""+n.b+e+":")})),c.label=3;case 3:return s=i.map((function(r){return o(u,void 0,void 0,(function(){var o,i,s,u;return a(this,(function(a){switch(a.label){case 0:return(o=Object(n.c)(r))?[4,Promise.all([t.get(""+n.b+e+":"+o),t.get(r)])]:[2,Promise.resolve()];case 1:return i=a.sent(),s=i[0],u=i[1],s?[2]:u?[3,3]:[4,t.remove(""+n.b+o)];case 2:return a.sent(),[3,5];case 3:return[4,Promise.all([t.set(""+n.b+e+":"+o,u),t.remove(""+n.b+o)])];case 4:a.sent(),a.label=5;case 5:return[2]}}))}))})),[4,Promise.all(s)];case 4:return c.sent(),[2]}}))}))}},1673:function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var n=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(i,s)}u((n=n.apply(t,e||[])).next())}))},o=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};function a(t,e){return t.lock&&t.lock.uuid===e&&Date.now()-t.lock.time>36e5}function i(t,e,r,a){return n(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return r.lock={uuid:e,time:Date.now()},[4,a.set(t,r)];case 1:return n.sent(),[2]}}))}))}function s(t,e,r,s){return n(this,void 0,void 0,(function(){var n;return o(this,(function(o){switch(o.label){case 0:return[4,r.get(t)];case 1:return(n=o.sent())?a(n,e)||"function"==typeof s&&!1===s(n)?[2,null]:[4,i(t,e,n,r)]:[2,null];case 2:return o.sent(),[4,(u=300,new Promise((function(t){setTimeout((function(){return t()}),u)})))];case 3:return o.sent(),[4,r.get(t)];case 4:return!(n=o.sent())||a(n,e)?[2,null]:[2,n]}var u}))}))}},1674:function(t,e){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);t.exports=function(){return r(n),n}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},1675:function(t,e){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}},1676:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1677);e.Delta=n.default;var o=r(1520);r(2173).registerDataHandlers(o.default,n.default,o.default)},1677:function(t,e,r){"use strict";var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};Object.defineProperty(e,"__esModule",{value:!0});var o=r(1439),a=r(1678),i=r(1519),s=r(1520),u=r(2172),c=r(1681),l=function(){function t(t,e){if(this[i.TYPE_PROPERTY]="Delta",Array.isArray(t)){var r=new o.default;a.default.isPool(e)&&0!==t.length||(e=new a.default);for(var n=0,u=t;n<u.length;n++){var c=u[n],l=e.packAttributes(c.attributes);r.push(new s.default({action:c.action,data:c.data,pool:e,packedAttributes:l}))}this.ops=r.stringify(!0),this.pool=e}else if(void 0===e){var f=t.indexOf(":");if(f<=0)throw new Error("Invalid delta: "+t);var p=parseInt(t.substring(0,f),36);if(isNaN(p))throw new Error("Invalid delta: "+t);var h=f+1+p;this.ops=t.substring(f+1,h),this.pool=0===p||t.length===h?new a.default:new a.default(t.substring(f+p+1))}else this.ops=t,this.pool=""===t?new a.default:e}return t.prototype.isEmpty=function(){return 0===this.ops.length},t.prototype.getIter=function(t){var e=void 0===t?{}:t,r=e.targetPool,n=e.sourcePool;return new u.default(this.ops,n||this.pool,r||this.pool,s.default)},Object.defineProperty(t.prototype,"length",{get:function(){for(var t=this.getIter(),e=0;t.hasNext();)e+=t.peekLength(),t.skip();return e},enumerable:!0,configurable:!0}),t.prototype.getPoolCopy=function(){return this.pool.clone()},t.prototype.map=function(e){for(var r=[],n=this.getIter();n.hasNext();)r.push(e(n.next()));return new t(r)},t.prototype.compose=function(e,r){var a={};r&&("boolean"==typeof r?a.isDocument=r:"object"==typeof r&&(a=r));var i=this.getPoolCopy(),s=new o.default([]),u=this.getIter({sourcePool:i,targetPool:i});Array.isArray(e)&&(e=new t(e,i));for(var c=e.getIter({targetPool:i});;){var l=u.hasNext(),f=c.hasNext();if(!l&&!f)break;if(!f)return new t(u.remainingStrs(s),i);if(!l&&c.isPoolCompatible())return new t(c.remainingStrs(s),i);if("insert"===c.peekAction())s.push(c.next());else if("remove"===u.peekAction())s.push(u.next());else{var p=Math.min(u.peekLength(),c.peekLength()),h=l?u.next(p):null,d=c.next(p);if("retain"===d.action)if(h){var y=void 0===a.isDocument?"insert"===h.action:a.isDocument;s.push(h.compose(d,n({},a,{isDocument:y})))}else s.push(d);else h&&"retain"!==h.action||s.push(d)}}return new t(s.stringify(!0),i)},t.prototype.transform=function(e,r){void 0===r&&(r=!1),Array.isArray(e)&&(e=new t(e));for(var n=e.getPoolCopy(),a=new o.default,i=this.getIter(),u=e.getIter({sourcePool:n,targetPool:n});u.hasNext();){if(!i.hasNext())return new t(u.remainingStrs(a),n);if("insert"!==i.peekAction()||!r&&"insert"===u.peekAction())if("insert"===u.peekAction())a.push(u.next());else{var c=Math.min(i.peekLength(),u.peekLength()),l=i.next(c),f=u.next(c);if("remove"===l.action){if(l.hasAttributes()||"remove"===f.action&&f.hasAttributes())throw new Error("Cannot transform removing operations with attributes");continue}if("remove"===f.action){if(f.hasAttributes())throw new Error("Cannot transform removing operations with attributes");a.push(f)}else a.push(l.transform(f,r))}else a.push(new s.default({action:"retain",data:i.peekLength()})),i.skip()}return new t(a.stringify(!0),n)},t.prototype.invert=function(e,r){for(var n=new a.default,i=new o.default,u=this.getIter({targetPool:n}),c=(Array.isArray(e)?new t(e,new a.default):e).getIter({targetPool:n});c.hasNext();)if("insert"===c.peekAction())i.push(new s.default({action:"remove",data:c.peekLength()})),c.skip();else{if(!u.hasNext())throw new Error("Delta should be smaller than document");if("insert"!==u.peekAction())throw new Error("Only document can invert deltas");var l=Math.min(u.peekLength(),c.peekLength()),f=c.next(l),p=u.next(l);"remove"===f.action?i.push(p):i.push(r?r(p,f):p.invert(f))}return new t(i.stringify(!0),n)},t.prototype.stringify=function(){return this.isEmpty()?"0:":this.ops.length.toString(36)+":"+this.ops+this.pool.stringify()},t.prototype.toJSON=function(){for(var t=[],e=this.getIter();e.hasNext();)t.push(e.next().toJSON());return t},t.prototype.explain=function(t){void 0===t&&(t="");for(var e=t+"Delta #"+this.ops.length+":\n",r=this.getIter();r.hasNext();)e+=r.next().explain(t+"  ");return""+e+t+"Pool: "+this.pool.stringify()+"\n"},t.prototype.validateTable=function(){for(var t={},e=this.getIter();e.hasNext();){var r=e.next();if("table"===r.dataType){var n=r.getAttributes().name;if("string"!=typeof n)continue;var o="$$"+n+"$$";if(t.hasOwnProperty(o))throw new Error("Duplicated table name found: "+n);t[o]=!0}}return this},t.isDelta=c.isDelta,t}();e.default=l},1678:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1519),o=r(2170),a=r(2171),i=!1,s=!1,u=!1,c=function(){function t(t){void 0===t&&(t={array:[],packedData:""}),this[n.TYPE_PROPERTY]="Pool",this.cache={},"string"==typeof t?(this.array=JSON.parse(t),this.packedData=t):(this.array=t.array,this.packedData=t.packedData)}return t.isPool=function(t){return"object"==typeof t&&null!==t&&"Pool"===t[n.TYPE_PROPERTY]},t.setIPoolConfig=function(t){t&&(i=!!t.enableCache,s=!!t.enableNullIgnore,u=!!t.enableRawString)},t.prototype.isSubsetOf=function(t){if(this===t)return!0;var e=this.array.length;if(0===e)return!0;if(e>t.array.length)return!1;for(var r=0;r<e;r++)if(this.array[r]!==t.array[r])return!1;return!0},t.prototype.getMap=function(){if(!this.map){this.map={};for(var t=0;t<this.array.length;t++)this.map[this.array[t]]=String(t)}return this.map},t.prototype.packAttributes=function(t){if(!t)return"";var e=Object.keys(t),r=e.length;if(0===r)return"";for(var n=[],o=[],i=0;i<r;i++){var s=e[i],u=t[s];if("object"==typeof u&&null!==u)for(var c=0,l=a.objectToKeyPaths(u,"."+s);c<l.length;c++){var f,p=l[c];" "===(f=this.getAddress(p[0],p[1]))[0]?n.push(f):o.push(f)}else" "===(f=this.getAddress(s,u))[0]?n.push(f):o.push(f)}return o.sort().join("")+n.sort().join("")},t.prototype.getAddress=function(t,e){var r=o.combinedAttributeWithValue(t,e),n=o.getGulByCombinedKeyValue(r);if("string"==typeof n)return n;var a=this.getMap();if(!a.hasOwnProperty(r)){this.packedData=void 0;var i=this.array.length;a[r]=String(i),this.array.push(r)}return" "+a[r]},t.prototype.unpackAttributes=function(t,e){void 0===e&&(e=!0);for(var r={},n=0,c=0;n<t.length&&" "!==t[n];){var l=o.getKeyValueByGul(t[n]),f=l[0],p=l[1];e&&"."===f[0]?a.keyPathToObject(r,f,p):r[f]=p,n+=1}if(n<t.length-1){var h=t.substring(n+1).split(" ");n++;for(var d=0,y=h;d<y.length;d++){var v=y[d],m=i?this.cache[v]||(this.cache[v]=o.parseCombinedAttributeValue(this.array[v])):o.parseCombinedAttributeValue(this.array[v]);f=m[0],p=m[1];if(e&&"."===f[0])a.keyPathToObject(r,f,p);else if((!s||null!==p)&&(r[f]=p,u&&("cellValue"===f||"formula"===f||"formulaResult"===f))){var g=r.rawString||t,b=v.length+1,w=n-c;r.rawString=g.substring(0,w)+g.substring(w+b),c+=b}n+=v.length+1}}return u&&!r.rawString&&(r.rawString=t),r},t.prototype.stringify=function(){return"string"!=typeof this.packedData&&(this.packedData=this.array.length?JSON.stringify(this.array):""),this.packedData},t.prototype.clone=function(){return new t({array:this.array.slice(),packedData:this.packedData})},t}();e.default=c},1679:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialToObjectKey={A:"attachment",C:"cell",I:"image",D:"delta",T:"table",P:"presentation",S:"slide",M:"mention",N:"inline-break",V:"divide",U:"upload-placeholder-attachment",G:"gallery",B:"gallery-block",Z:"mindmap",O:"object",F:"form"},e.objectKeyToInitial=Object.keys(e.initialToObjectKey).reduce((function(t,r){return t[e.initialToObjectKey[r]]=r,t}),{})},1680:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.merge=function(t,e,r){var n=Object.keys(t);if(r&&0===n.length)return e;for(var o=0,a=Object.keys(e);o<a.length;o++){var i=a[o];t[i]=e[i],r||null!==t[i]||delete t[i]}return t},e.transform=function(t,e,r){if(r)return e;var n=Object.keys(e);if(0===n.length)return e;var o=Object.keys(t);if(0===o.length)return e;if(o.length>n.length)for(var a=0,i=n;a<i.length;a++){var s=i[a];t.hasOwnProperty(s)&&delete e[s]}else for(var u=0,c=o;u<c.length;u++){delete e[c[u]]}return e},e.invert=function(t,e){var r=Object.keys(e);if(0===r.length)return e;if(0===Object.keys(t).length)for(var n=0,o=r;n<o.length;n++){e[s=o[n]]=null}else for(var a=0,i=r;a<i.length;a++){var s,u=t[s=i[a]];e[s]=void 0===u?null:u}return e}},1681:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1519);e.isDelta=function(t){return"object"==typeof t&&null!==t&&"Delta"===t[n.TYPE_PROPERTY]}},1682:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.possibleDeltaInputToString=function(t,e){if(null==e)return"";if(Array.isArray(e)){if(0===e.length)return"";var r=new t(e);return r.isEmpty()?"":r.stringify()}return e.isEmpty()?"":e.stringify()}},1683:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=r(1682),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compose=function(t,e,r){for(var n=this.parse(t).slice(0),o=this.parse(e).slice(0),a=Math.max(n.length,o.length),i=new Array(a),s=0;s<a;s++){var u=n[s],c=o[s];i[s]=u?c?u.compose(c,r):u:c}return this.pack(i)},e.prototype.transform=function(t,e,r){for(var n=this.parse(t).slice(0),o=this.parse(e).slice(0),a=Math.max(n.length,o.length),i=new Array(a),s=0;s<a;s++){var u=n[s],c=o[s];i[s]=u?c?u.transform(c,r):void 0:c}return this.pack(i)},e.prototype.invert=function(t,e){for(var r=this.parse(t).slice(0),n=this.parse(e).slice(0),o=Math.max(r.length,n.length),a=new Array(o),i=0;i<o;i++){var s=r[i],u=n[i];a[i]=s?u?s.invert(u):void 0:u}return this.pack(a)},e.prototype.parse=function(t){for(var e=0,r=[];e<t.length;){var n=t.indexOf("$",e);if(-1===n)break;var o=parseInt(t.substring(e,n),36),a=n+1+o,i=0===o?void 0:new this.deltaConstructor(t.substring(n+1,a));e=a,r.push(i)}return r},e.prototype.pack=function(t){for(var e="",r=0,n=t;r<n.length;r++){var o=n[r],i=a.possibleDeltaInputToString(this.deltaConstructor,o);e+=i.length.toString(36)+"$"+i}return e},e.prototype.toJSON=function(t){return this.parse(t).map((function(t){return t?t.toJSON():void 0}))},e.prototype.explain=function(t,e){for(var r=t+"List:\n",n=this.parse(e),o=0;o<n.length;o++){var a=n[o];r+=t+"Item #"+o+":\n",r+=a?a.explain(t):"[EMPTY]"}return r},e}(r(1382).default);e.default=i},1693:function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=r(1441),i=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o(r,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"setData",value:function(t){if(function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),"number"==typeof this.data&&1!==this.data)throw new Error('The value of data should be "1", got '+this.data);return this}},{key:"name",value:function(){return"CellOperator"}},{key:"compose",value:function(t){if("remove"===this.action)throw new Error("Removing operator cannot compose other operators");if("retain"!==t.action)throw new Error("Only retaining operator can be composed");var e=void 0;if("function"==typeof this.data.compose&&t.data.constructor.packId===this.data.constructor.packId)e=void 0!==a.unpack(t.attributes).cellValue?t.data:this.data.compose(t.data);else if("number"==typeof this.data)e=t.data;else{e=void 0!==a.unpack(t.attributes).cellValue?1:this.data}return(this.isGeneric()?t:this).createInstance({data:e,attributes:a.merge(this.attributes,t.attributes,"insert"!==this.action),action:this.action})}},{key:"invert",value:function(t){if("insert"!==this.action)throw new Error('invert should only apply to the "insert" action ('+this.constructor.name+")");if("retain"!==t.action)throw new Error("Only retaining operator can be inverted");var e=void 0;if("function"==typeof this.data.invert&&t.data.constructor.packId===this.data.constructor.packId)e=void 0!==a.unpack(t.attributes).cellValue?this.data:this.data.invert(t.data);else if("number"==typeof t.data){e=void 0!==a.unpack(t.attributes).cellValue?this.data:t.data}else e=this.data;return this.createInstance({data:e,attributes:a.invert(this.attributes,t.attributes),action:"retain"})}}]),e}(r(1443));i.packId=4,t.exports=i},1694:function(t,e,r){"use strict";var n;function o(t,e){}r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o})),function(t){t[t.GET_CONTENT_ERROR=0]="GET_CONTENT_ERROR",t[t.COLLAB_ERROR=1]="COLLAB_ERROR",t[t.PULL_ERROR=2]="PULL_ERROR"}(n||(n={}))},2164:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return s})),r.d(e,"e",(function(){return u})),r.d(e,"f",(function(){return c})),r.d(e,"a",(function(){return l}));var n=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(i,s)}u((n=n.apply(t,e||[])).next())}))},o=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},a="lizard:offlinedata:";function i(t){return 0!==t.indexOf(a)?"":t.replace(a,"").split(":").pop()}function s(t,e){return""+a+e+":"+t}function u(t){return!t||(!(e=t.delta)||e.length<=2);var e}function c(t){return u(t.committingChange)&&u(t.userChange)}var l=function(){function t(t){var e=t.guid,r=t.pageType,n=t.docType,o=t.driver,a=t.userId;this.guid=e,this.userId=a,this.pageType=r,this.docType=n,this.name=this.getName(),this.driver=o}return t.prototype.get=function(){return n(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,this.driver.get(this.name)];case 1:return(t=e.sent())&&!this.docType&&(this.docType=t.docType),t&&!this.pageType&&(this.pageType=t.pageType),[2,t]}}))}))},t.prototype.set=function(t){return n(this,void 0,void 0,(function(){return o(this,(function(e){if(!this.pageType||!this.docType)throw new Error("OfflineDataStorage.set failed: pageType or docType miss");return this.driver.set(this.name,this.format(t)),[2]}))}))},t.prototype.changeGuid=function(t){return n(this,void 0,void 0,(function(){var e,r;return o(this,(function(n){switch(n.label){case 0:return[4,this.get()];case 1:return e=n.sent(),r=this.name,this.guid=t,this.name=this.getName(),e?[4,this.set(e)]:[3,3];case 2:n.sent(),this.driver.remove(r),n.label=3;case 3:return[2]}}))}))},t.prototype.remove=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.driver.remove(this.name)]}))}))},t.prototype.getName=function(){return s(this.guid,this.userId)},t.prototype.format=function(t){return{committingChange:t.committingChange&&t.committingChange.delta?{delta:t.committingChange.delta,uuid:t.committingChange.uuid}:void 0,userChange:t.userChange&&t.userChange.delta?{delta:t.userChange.delta,uuid:t.userChange.uuid}:void 0,pageType:this.pageType,docType:this.docType,guid:this.guid,rev:t.rev,clientId:t.clientId}},t}()},2167:function(t,e,r){var n,o,a=r(1674),i=r(1675),s=0,u=0;t.exports=function(t,e,r){var c=e&&r||0,l=e||[],f=(t=t||{}).node||n,p=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==p){var h=a();null==f&&(f=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==p&&(p=o=16383&(h[6]<<8|h[7]))}var d=void 0!==t.msecs?t.msecs:(new Date).getTime(),y=void 0!==t.nsecs?t.nsecs:u+1,v=d-s+(y-u)/1e4;if(v<0&&void 0===t.clockseq&&(p=p+1&16383),(v<0||d>s)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=d,u=y,o=p;var m=(1e4*(268435455&(d+=122192928e5))+y)%4294967296;l[c++]=m>>>24&255,l[c++]=m>>>16&255,l[c++]=m>>>8&255,l[c++]=255&m;var g=d/4294967296*1e4&268435455;l[c++]=g>>>8&255,l[c++]=255&g,l[c++]=g>>>24&15|16,l[c++]=g>>>16&255,l[c++]=p>>>8|128,l[c++]=255&p;for(var b=0;b<6;++b)l[c+b]=f[b];return e||i(l)}},2168:function(t,e,r){var n=r(1674),o=r(1675);t.exports=function(t,e,r){var a=e&&r||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var s=0;s<16;++s)e[a+s]=i[s];return e||o(i)}},2169:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=function(t){return new Promise((function(e){setTimeout(e,t)}))}},2170:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keyToGul={color:"0",background:"1","font-size":"2",width:"3",height:"4",rowspan:"5",colspan:"6",align:"7",bold:"8",italic:"9",underline:"a",vertical:"b",strike:"c",wrap:"d",fixedRowsTop:"e",fixedColumnsLeft:"f",link:"g",format:"h",formula:"i",filter:"j","border-top":"k","border-right":"l","border-bottom":"m","border-left":"n",line:"o",guid:"p",author:"q",size:"r",list:"s",layout:"t",margin:"u",font:"v",header:"w",indent:"x",comment:"y","comment-block":"z","code-block":"A",name:"B",order:"C",autoFit:"D",userID:"E",nextIndex:"F",id:"G",colVisible:"H",rowVisible:"I",autoFormatter:"J",copyIndex:"K",manualAlign:"L",lock:"M",left:"N",top:"O"};var n=["color","background","font-size","width","height","rowspan","colspan","align","bold","italic","underline","vertical","strike","wrap","fixedRowsTop","fixedColumnsLeft","link","format","formula","filter","border-top","border-right","border-bottom","border-left","line","guid","author","size","list","layout","margin","font","header","indent","comment","comment-block","code-block","name","order","autoFit","userID","nextIndex","id","colVisible","rowVisible","autoFormatter","copyIndex","manualAlign","lock","left","top","cellValue"];function o(t){var e,r=t.charCodeAt(0);if(r>=48&&r<=57)e=n[r-48];else if(r>=65&&r<=90)e=n[r-29];else{if(!(r>=97&&r<=122))throw new Error('Unknown gul "'+t+'"');e=n[r-87]}return e}function a(t){var r=e.keyToGul[t];if(r)return r;var n=t.length.toString(36),o=n.length;if(o>2)throw new Error("Key length of attribute should <= 2: "+n);return""+(1===o?"$":"%")+n+t}e.getAttributeKeyByGul=o,e.getGulByAttributeKey=a,e.combinedAttributeWithValue=function(t,e){var r=a(t);return"string"==typeof e?r+":"+e:"number"==typeof e?r+"*"+e.toString():"boolean"==typeof e?r+(e?"1":"0"):r},e.keyValueToGul={81:"!","2*12":'"',"2*11":"#","2*10":"$","2*9":"%","2*8":"&","6*2":"'","6*3":"(","6*4":")","5*2":"*","5*3":"+","5*4":",","0:#ff0000":"-","0:#ffffff":".","b:bottom":"/","h:normal":"0",1:"1","1:#ffffff":"2","1:#ff0000":"3","1:#ffff00":"4","1:#00ffff":"5","7:left":"6","7:center":"7","7:right":"8","1*4":"9","d:text-wrap":":","d:text-no-wrap":";","h:YYYY/MM/DD":"<",'l:["",1]':"=",'n:["",1]':">",'k:["",1]':"?",'m:["",1]':"@",'l:["#2b2b2b",1]':"A",'n:["#2b2b2b",1]':"B",'k:["#2b2b2b",1]':"C",'m:["#2b2b2b",1]':"D"};var i=[["bold",!0],["font-size",12],["font-size",11],["font-size",10],["font-size",9],["font-size",8],["colspan",2],["colspan",3],["colspan",4],["rowspan",2],["rowspan",3],["rowspan",4],["color","#ff0000"],["color","#ffffff"],["vertical","bottom"],["format","normal"],["background",null],["background","#ffffff"],["background","#ff0000"],["background","#ffff00"],["background","#00ffff"],["align","left"],["align","center"],["align","right"],["background",4],["wrap","text-wrap"],["wrap","text-no-wrap"],["format","YYYY/MM/DD"],["border-right",'["",1]'],["border-left",'["",1]'],["border-top",'["",1]'],["border-bottom",'["",1]'],["border-right",'["#2b2b2b",1]'],["border-left",'["#2b2b2b",1]'],["border-top",'["#2b2b2b",1]'],["border-bottom",'["#2b2b2b",1]']];e.getGulByCombinedKeyValue=function(t){return e.keyValueToGul.hasOwnProperty(t)?e.keyValueToGul[t]:null},e.getKeyValueByGul=function(t){var e=t.charCodeAt(0)-33;return i[e]},e.parseCombinedAttributeValue=function(t){var e;if("$"===t[0]){var r=parseInt(t[1],36);e=t.substring(2,2+r),t=t.substring(1+r)}else if("%"===t[0]){r=parseInt(t[1]+t[2],36);e=t.substring(3,3+r),t=t.substring(2+r)}else e=o(t[0]);if(1===t.length)return[e,null];var n=t[1];if("1"===n)return[e,!0];if("0"===n)return[e,!1];var a=t.substring(2);return[e,":"===n?a:Number(a)]}},2171:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.objectToKeyPaths=function t(e,r,n){void 0===n&&(n=[]);for(var o=0,a=Object.keys(e);o<a.length;o++){var i=a[o],s=e[i],u=r+"."+i;"object"==typeof s&&null!==s?t(s,u,n):n.push([u,s])}return n},e.keyPathToObject=function(t,e,r){for(var n=e.split("."),o=n.length,a=1;a<o-1;a++){var i=n[a],s=t[i];t="object"==typeof s&&null!==s?s:t[i]={}}var u=n[o-1];null===r&&void 0!==t[u]&&null!==t[u]||(t[u]=r)}},2172:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1679),o=r(1439),a=function(){function t(t,e,r,n){this.ops=t,this.pool=e,this.targetPool=r,this.operatorConstructor=n,this.cursor=0,this.offset=0}return t.prototype.isPoolCompatible=function(){return void 0===this.isCompatible&&(this.isCompatible=this.pool.isSubsetOf(this.targetPool)),this.isCompatible},t.prototype.hasNext=function(){return this.cursor<this.ops.length},t.prototype.remainingStrs=function(t){for(;this.hasNext();){var e=this.next();if(t.push(e)!==o.PushResult.REORDERED){var r=this.cursor;return this.cursor=this.ops.length,this.nextData=void 0,t.stringify()+this.ops.substring(r)}}return t.stringify(!0)},t.prototype.skip=function(t){void 0===t&&(t=1/0);var e=this.peekNext();if(null===e)throw new Error("No more operators");var r,n=this.offset;return t+n>=e.dataLength?(r=e.dataLength-n,this.nextData=void 0,this.cursor=e.opIndex+e.opLength,this.offset=0):(r=t,this.offset+=r),[r,n,e]},t.prototype.next=function(t,e){void 0===t&&(t=1/0);var r,o=this.skip(t),a=o[0],i=o[1],s=o[2];switch(s.dataType){case"number":r=a;break;case"string":r=this.ops.substring(s.dataIndex+1+i,s.dataIndex+1+i+a);break;default:var u=this.ops[s.dataIndex+1+i],c=this.ops.substring(s.dataIndex+1+1,s.dataIndex+1+s.actualLength);(f={})[n.initialToObjectKey[u]]=c,r=f}var l,f,p=this.ops.substring(s.dataIndex+1+s.actualLength,s.opIndex+s.opLength),h=this.targetPool,d=""!==p&&!this.isPoolCompatible();return 0!==i||a!==s.dataLength||d||(l=this.ops.substring(s.opIndex,s.dataIndex+1+s.actualLength)),d&&(p=h.packAttributes(this.pool.unpackAttributes(p))),new this.operatorConstructor({action:e||s.action,data:r,packedAttributes:p,pool:h},l)},t.prototype.peekAction=function(){var t=this.peekNext();return null===t?"retain":t.action},t.prototype.peekLength=function(){var t=this.peekNext();return null===t?1/0:t.dataLength-this.offset},t.prototype.peekNext=function(){if(!this.hasNext())return null;if(void 0===this.nextData){var t=void 0,e=void 0;e=this.cursor+1;for(var r=this.ops.length;e<r;){switch(this.ops[e]){case"!":t="insert";break;case"@":t="retain";break;case"#":t="remove"}if(void 0!==t)break;e+=1}var n=e,o=parseInt(this.ops.substring(this.cursor,n),36);e=n+1;for(var a=void 0;e<r;){switch(this.ops[e]){case"!":a="string";break;case"#":a="number";break;case"@":a="object"}if(void 0!==a)break;e+=1}var i=e,s=parseInt(this.ops.substring(n+1,i),36),u="number"===a?0:s,c="object"===a?1:s;this.nextData={action:t,dataIndex:i,dataLength:c,opIndex:n,opLength:o,dataType:a,actualLength:u}}return this.nextData},t}();e.default=a},2173:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2174),o=r(2176),a=r(2177),i=r(2178),s=r(2179),u=r(1683);e.registerDataHandlers=function(t,e,r){var c=function(t,e){return function(r){return new r(t,e)}}(e,r);t.registerDataHandler("delta",c(o.default)),t.registerDataHandler("table",c(n.default)),t.registerDataHandler("presentation",c(i.default)),t.registerDataHandler("slide",c(a.default)),t.registerDataHandler("mindmap",c(a.default)),t.registerDataHandler("object",c(s.default)),t.registerDataHandler("form",c(u.default))}},2174:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=r(1682),i=r(2175),s=r(1382),u=r(1438),c=r(1439),l=r(1677),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.pack=function(t){var e=t.rows,r=t.cols,n=a.possibleDeltaInputToString(this.deltaConstructor,e),o=a.possibleDeltaInputToString(this.deltaConstructor,r);return n.length.toString(36)+"$"+n+o},e.prototype.toJSON=function(t){var e=this.parse(t),r=e[0],n=e[1];return{rows:null===r?null:r.toJSON(),cols:null===n?null:n.toJSON()}},e.prototype.explain=function(t,e){var r=t+"Rows:\n",n=this.parse(e),o=n[0],a=n[1];return r+=null===o?"[EMPTY]":o.explain(t),r+=t+"Cols:\n",r+=null===a?"[EMPTY]":a.explain(t)},e.prototype.parse=function(t){var e=t.indexOf("$"),r=parseInt(t.substring(0,e),36),n=e+1+r;return[0===r?null:new this.deltaConstructor(t.substring(e+1,n)),t.length===n?null:new this.deltaConstructor(t.substring(n))]},e.prototype.compose=function(t,e,r){var n=this.parse(t),o=n[0],a=n[1],s=this.parse(e),u=s[0],c=s[1],l=null===u?o:null===o?u:o.compose(u,r),f=i.reindexInnerDeltas(a,u),p=null===c?f:null===f?c:f.compose(c,r);return this.pack({rows:l,cols:p})},e.prototype.transform=function(t,e,r){var n=this.parse(t),o=n[0],a=n[1],s=this.parse(e),u=s[0],c=s[1],l=null===o||null===u?u:o.transform(u,r),f=null===o||null===u?o:u.transform(o,!r),p=i.reindexInnerDeltas(a,l),h=i.reindexInnerDeltas(c,f),d=null===p||null===h?h:p.transform(h,r);return this.pack({rows:l,cols:d})},e.prototype.invert=function(t,e){var r=this,n=this.parse(t),o=n[0],a=n[1],s=this.parse(e),f=s[0],p=s[1],h=f&&(null===o?new this.deltaConstructor([]):o).invert(f),d=i.invertInnerDeltas(a,f);if(null!==p){var y=null===a?new l.default([]):a;if(d){var v=i.DeltaToIndexModifiers(p);d=i.reindexDelta(d,v)}var m=i.reindexInnerDeltas(p,h);if(null===m)throw new Error("ASSERT: targetCols === null");var g=y.invert(m,(function(t,e){if("delta"!==e.dataType)return t.invert(e);for(var n=new u.Pool,o=new c.default([]),a="number"===t.dataType?null:new r.deltaConstructor(t.getCustomData()).getIter({targetPool:n}),i=new r.deltaConstructor(e.getCustomData()).getIter({targetPool:n});i.hasNext();){var s=void 0,l=void 0;if(null!==a&&a.hasNext()){var f=Math.min(a.peekLength(),i.peekLength());s=a.next(f,"insert"),l=i.next(f)}else{var p=i.peekLength();s=new r.operatorConstructor({action:"insert",data:p}),l=i.next()}o.push(s.invert(l))}return t.invert(e,{delta:new r.deltaConstructor(o.stringify(!0),n).stringify()})}));d=d?d.compose(g):g}return this.pack({rows:h,cols:d})},e}(s.default);e.default=f},2175:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1439),o=r(1676),a=r(1520);function i(t){for(var e=[],r=-1,n=t.getIter();n.hasNext();){var o=n.next(),a=o.action,i=o.length;-1!==r&&e[r][0]===a?e[r][1]+=i:e[++r]=[a,i]}return e}function s(t,e){for(var r=t.getPoolCopy(),i=new n.default([]),s=t.getIter({sourcePool:r,targetPool:r}),u=new Array(e.length),c=0;c<e.length&&s.hasNext();c++){var l=u[c]||e[c],f=l[0],p=l[1];switch(f){case"insert":i.push(new a.default({action:"retain",data:p,packedAttributes:"",pool:r}));break;case"retain":(h=s.peekLength())>=p?i.push(s.next(p)):(i.push(s.next()),u[c]=["retain",p-h],c-=1);break;case"remove":var h;(h=s.peekLength())>=p?s.skip(p):(s.skip(),u[c]=["remove",p-h],c-=1)}}for(;s.hasNext();)i.push(s.next());return new o.Delta(i.stringify(!0),r)}e.DeltaToIndexModifiers=i,e.reindexDelta=s,e.reindexInnerDeltas=function(t,e){if(null===t||null===e)return t;var r=i(e);return 0===r.length?t:t.map((function(t){var e={action:t.action,data:t.data};if("remove"!==e.action&&t.hasAttributes()&&(e.attributes=t.getAttributes()),"delta"===t.dataType){var n=s(new o.Delta(t.getCustomData()),r);e.data=n.isEmpty()?1:{delta:n.stringify()}}else e.data=t.data;return e}))},e.invertInnerDeltas=function(t,e){if(null===t||null===e)return null;for(var r=i(e),s=!1,u=0,c=r;u<c.length;u++){if("remove"===c[u][0]){s=!0;break}}return s?t.map((function(t){var e={action:"retain",data:t.data};if(t.hasAttributes()&&(e.attributes=t.getAttributes()),"delta"===t.dataType){var i=function(t,e){for(var r=t.getPoolCopy(),i=new n.default([]),s=t.getIter({sourcePool:r,targetPool:r}),u=new Array(e.length),c=0;c<e.length&&s.hasNext();c++){var l=u[c]||e[c],f=l[0],p=l[1];switch(f){case"retain":var h=s.peekLength(),d=Math.min(p,h);i.push(new a.default({action:"retain",data:d,packedAttributes:"",pool:r})),s.skip(d),h<p&&(u[c]=["retain",p-h],c-=1);break;case"remove":(h=s.peekLength())>=p?i.push(s.next(p)):(i.push(s.next()),u[c]=["remove",p-h],c-=1)}}for(var y=0;s.hasNext();)y+=s.peekLength(),s.skip();return y>0&&i.push(new a.default({action:"retain",data:y,packedAttributes:"",pool:r})),new o.Delta(i.stringify(!0),r)}(new o.Delta(t.getCustomData()),r);e.data=i.isEmpty()?1:{delta:i.stringify()}}else e.data=t.data;return e})):null}},2176:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=r(1382),i=r(1681),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compose=function(t,e,r){return this.parse(t).compose(this.parse(e),r).stringify()},e.prototype.transform=function(t,e,r){return this.parse(t).transform(this.parse(e),r).stringify()},e.prototype.invert=function(t,e){return this.parse(t).invert(this.parse(e)).stringify()},e.prototype.parse=function(t){return new this.deltaConstructor(t)},e.prototype.pack=function(t){if(Array.isArray(t))return new this.deltaConstructor(t).stringify();if(i.isDelta(t))return t.stringify();throw new Error("Unsupported delta value for packing "+t)},e.prototype.toJSON=function(t){return this.parse(t).toJSON()},e.prototype.explain=function(t,e){return this.parse(e).explain(t)},e}(a.default);e.default=s},2177:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compose=function(t,e,r){for(var n=this.parse(t),o=this.parse(e),a=0,i=Object.keys(o);a<i.length;a++){var s=i[a],u=n[s],c=o[s];n[s]=void 0===u?c:u.compose(c,r)}return this.pack(n)},e.prototype.transform=function(t,e,r){for(var n=this.parse(t),o=this.parse(e),a=0,i=Object.keys(o);a<i.length;a++){var s=i[a],u=n[s];if(void 0!==u){var c=o[s];o[s]=u.transform(c,r)}}return this.pack(o)},e.prototype.invert=function(t,e){for(var r=this.parse(t),n=this.parse(e),o=0,a=Object.keys(n);o<a.length;o++){var i=a[o],s=r[i]||new this.deltaConstructor([]);n[i]=s.invert(n[i])}return this.pack(n)},e.prototype.parse=function(t){for(var e={},r=0;r<t.length;){var n=t.substring(r,r+8),o=t.indexOf("#",r+8),a=parseInt(t.substring(r+8,o),36),i=new this.deltaConstructor(t.substring(o+1,o+1+a));e[n]=i,r=o+1+a}return e},e.prototype.pack=function(t){for(var e="",r=0,n=Object.keys(t).sort();r<n.length;r++){var o=n[r];if(8!==o.length)throw new Error("element id length must equal to 8, got "+o);var a=t[o],i=Array.isArray(a)?new this.deltaConstructor(a):a;if(i.getIter().hasNext()){var s=i.stringify();e+=""+o+s.length.toString(36)+"#"+s}}return e},e.prototype.toJSON=function(t){for(var e={},r=this.parse(t),n=0,o=Object.keys(r);n<o.length;n++){var a=o[n],i=r[a];e[a]=i.toJSON()}return e},e.prototype.explain=function(t,e){for(var r=t+"Elements:\n",n=this.parse(e),o=0,a=Object.keys(n);o<a.length;o++){r+=n[a[o]].explain(t)}return r},e}(r(1382).default);e.default=a},2178:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.pack=function(e){return t.prototype.pack.call(this,Array.isArray(e)?e:[e.slides,e.layouts,e.notes])},e.prototype.toJSON=function(e){var r=t.prototype.toJSON.call(this,e);return{slides:r[0],layouts:r[1],notes:r[2]}},e.prototype.explain=function(t,e){var r=t+"Slides:\n",n=this.parse(e),o=n[0],a=n[1],i=n[2];return r+=o?o.explain(t):"[EMPTY]",r+=t+"Layouts:\n",r+=a?a.explain(t):"[EMPTY]",r+=t+"Notes:\n",r+=i?i.explain(t):"[EMPTY]"},e}(r(1683).default);e.default=a},2179:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var a=r(1382),i=r(1680),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compose=function(t,e,r){return this.pack(i.merge(this.parse(t),this.parse(e),!r.isDocument),!!r.isDocument)},e.prototype.transform=function(t,e,r){return this.pack(i.transform(this.parse(t),this.parse(e),r),!1)},e.prototype.invert=function(t,e){return this.pack(i.invert(this.parse(t),this.parse(e)),!1)},e.prototype.parse=function(t){return JSON.parse(t)},e.prototype.pack=function(t,e){return e?JSON.stringify(t,(function(t,e){return null===e?void 0:e})):JSON.stringify(t)},e.prototype.toJSON=function(t){return this.parse(t)},e.prototype.explain=function(t,e){return JSON.stringify(this.parse(e),null,t)},e}(a.default);e.default=s},2195:function(t,e,r){"use strict";var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0};function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var s=r(1443),u=r(1442),c=r(1355),l=r(2196),f=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i(r,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"freeze",value:function(){c.freeze(this.data),c.freeze(this.data.rows),c.freeze(this.data.cols)}},{key:"name",value:function(){return"TableOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return{table:this.data}}},{key:"skipDiff",value:function(){return!0}},{key:"_genericSet",value:function(t){var r=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_genericSet",this).call(this,t),n=r.changed,o=r.op;if("object"==typeof o.data){if(o.data.rows||(o.data.rows=new u),o.data.cols||(o.data.cols=new u),o.data.cells||(o.data.cells={}),"function"!=typeof o.data.cells.name&&(o.data.cells=new l({action:o.action,cells:o.data.cells})),"function"!=typeof o.data.rows.pack)throw new Error("rows should be a Delta");if("function"!=typeof o.data.cols.pack)throw new Error("cols should be a Delta");"retain"===o.action&&o.data.rows.isEmpty()&&o.data.cols.isEmpty()&&!Object.keys(o.data.cells).length&&(o.data=1)}if("insert"===o.action){if(!o.data.rows.isDocument())throw new Error("rows should be a document");if(!o.data.cols.isDocument())throw new Error("cols should be a document")}return{changed:n,op:o}}},{key:"pack",value:function(){var t=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pack",this).call(this);if("object"==typeof t[1]){var r=t[1],n=r.cells,o=r.rows,i=r.cols;if(t[1]=[n.pack()],o.isEmpty()&&i.isEmpty())return t;i.isEmpty()?t[1].push(o.pack()):(t[1].push(o.isEmpty()?0:o.pack()),t[1].push(i.pack()))}return t}},{key:"compose",value:function(t){var r=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"compose",this).call(this,t);if("number"==typeof this.data||"number"==typeof t.data)return r;var n={rows:r.data.rows.compose(t.data.rows),cols:r.data.cols.compose(t.data.cols)},o=new l({cells:r.data.cells,action:r.action});return o.composeWithMutations(t.data),t.data.cells.forEach((function(e){var r=o.get(e),n=t.data.cells.get(e);o.set(e,r.compose(n))})),n.cells=o,r.set({data:n})}},{key:"invert",value:function(t){var r=this,n=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"invert",this).call(this,t);if("number"==typeof this.data||"number"==typeof t.data)return n;var o={rows:this.data.rows.invert(t.data.rows),cols:this.data.cols.invert(t.data.cols)},i=new l({cells:t.data.cells,action:n.action});i.composeWithMutations(o,(function(e,n){try{return r.data.cells.get(n).invert(e)}catch(e){throw new Error(e.message+": "+t.getAttributes().id+", "+n)}}));var s=t.data.rows.isEmpty(),u=t.data.cols.isEmpty();return s&&u||this.data.cells.forEach((function(e){var n=c.parsePosition(e),o=n.row,a=n.col;null!==t.data.rows.composePosition(o)&&null!==t.data.cols.composePosition(a)||i.set(e,r.data.cells.get(e))})),o.cells=i,n.set({data:o})}},{key:"transform",value:function(t,r){var n=this,o=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"transform",this).call(this,t,r);if("number"==typeof this.data||"number"==typeof t.data)return o;var i={rows:o.data.rows.transform(this.data.rows,!r),cols:o.data.cols.transform(this.data.cols,!r)},s={rows:this.data.rows.transform(t.data.rows,r),cols:this.data.cols.transform(t.data.cols,r)},u=new l({cells:t.data.cells,action:o.action});u.composeWithMutations(i);var f=t.data.rows.isEmpty(),p=t.data.cols.isEmpty();return this.data.cells.forEach((function(t){var e=c.parsePosition(t),o=e.row,a=e.col;if(f||(o=s.rows.composePosition(o)),p||(a=s.cols.composePosition(a)),null!==o&&null!==a){var i=c.stringifyPosition(o,a);u.set(i,n.data.cells.get(t).transform(u.get(i),r))}})),s.cells=u,o.set({data:s})}}],[{key:"unpack",value:function(t){if(Array.isArray(t[1])){var r=n(t[1],3),o=r[0],i=r[1],s=r[2];t[1]={rows:i?u.unpack(i):null,cols:s?u.unpack(s):null,cells:o}}return a(e.__proto__||Object.getPrototypeOf(e),"unpack",this).call(this,t)}}]),e}(s);f.packId=3,t.exports=f},2196:function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var o=r(1693),a=r(1442),i=r(1355),s=r(2197),u=function(){function t(e){var r=e.cells,n=e.action;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cells={},"function"==typeof r.name)for(var o in this.proto=r.proto,r.cells)r.cells.hasOwnProperty(o)&&(this.cells[o]=r.cells[o]);else this.proto=r;this.action=n}return n(t,[{key:"name",value:function(){return"CellManager"}},{key:"keys",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=void 0;return(n=void 0===this.cells[t]?this.proto[t]:this.cells[t])?(e&&Array.isArray(n)&&(n=this.cells[t]=o.operatorUnpacker(n)),n.action&&n.action!==this.action&&(n=this.cells[t]=n.set({action:this.action}))):n=r?null:new o({action:this.action,data:"insert"===this.action?new a:1}),n&&1===n.constructor.packId&&(n=new o({action:n.action,attributes:n.attributes,data:n.data})),n}},{key:"forEach",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var r in this.cells)!this.cells.hasOwnProperty(r)||e&&null===this.cells[r]||t(r);for(var n in this.proto)this.proto.hasOwnProperty(n)&&!this.cells.hasOwnProperty(n)&&null!==this.proto[n]&&t(n)}},{key:"some",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var r in this.cells)if(this.cells.hasOwnProperty(r)&&t(r))return!0;if(!e)for(var n in this.proto)if(this.proto.hasOwnProperty(n)&&!this.cells.hasOwnProperty(n)&&t(n))return!0;return!1}},{key:"set",value:function(t,e){this.cells[t]=e||null}},{key:"composeWithMutations",value:function(t,e){var r=this,n=t.rows,o=t.cols,a=n.isEmpty(),s=o.isEmpty();if(!a||!s||e){var u={},c={row:{},col:{}};this.forEach((function(t){var l=i.parsePosition(t),f=l.row,p=l.col;if(a||(void 0===c.row[f]&&(c.row[f]=n.composePosition(f)),f=c.row[f]),s||(void 0===c.col[p]&&(c.col[p]=o.composePosition(p)),p=c.col[p]),u[t]||(u[t]=null),null!==f&&null!==p){var h=i.stringifyPosition(f,p),d=r.get(t,!0,!e);u[h]=e?e(d,h):d}}),!1),this.cells=u}}},{key:"pack",value:function(){var t=this,e={};return this.forEach((function(r){var n=t.get(r,!1);Array.isArray(n)?e[r]=n:(n.attributes||n.data.isEmpty&&!n.data.isEmpty())&&(e[r]=n.pack())})),s(e)?0:e}}]),t}();t.exports=u},2198:function(t,e,r){"use strict";var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),o(r,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"name",value:function(){return"TextOperator"}},{key:"getEmbedObject",value:function(){if("object"!=typeof this.data)throw new Error("data is not an embed object");return this.data}},{key:"setData",value:function(t){switch(function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setData",this).call(this,t),this.action){case"insert":if("string"!=typeof this.data&&"object"!=typeof this.data)throw new Error('data should be a string or an object for "insert" action, got '+this.data);break;case"retain":if("number"!=typeof this.data)throw new Error('data should be a number for "'+this.action+'" action, got '+this.data)}return this}}]),e}(r(1443));a.packId=2,t.exports=a},3183:function(t,e,r){"use strict";r.d(e,"a",(function(){return y}));var n=r(2164),o=r(1204),a=r(1517),i=r(2199),s=r(1438),u=r(1440),c=function(){function t(t,e){void 0===e&&(e=""),this.docType=t,this.value="string"!=typeof e?e:e?"modoc"===t?new s.Delta(e):Object(u.unpack)(e):"modoc"===t?new s.Delta([]):new u.Delta}return t.prototype.getValue=function(){return this.value},t.prototype.toString=function(){return"modoc"===this.docType?this.value.stringify():Object(u.pack)(this.value)},t.prototype.composeToSelf=function(t){this.value=this.value.compose(t.getValue())},t.prototype.compose=function(t){var e=this.clone();return e.composeToSelf(t),e},t.prototype.clone=function(){return new t(this.docType,this.value)},t}();var l=function(){function t(t){this.docType=t.docType,this.offlineDataStorage=t.offlineDataStorage,this.clientId=t.clientId,this.delta=new c(this.docType),this.uuid=Object(a.v1)()}return t.prototype.initWith=function(t){this.delta.composeToSelf(new c(this.docType,t))},t.prototype.set=function(t){this.delta.composeToSelf(new c(this.docType,t));var e=this.delta.toString();this.offlineDataStorage.set({clientId:this.clientId,guid:"",rev:1,committingChange:{delta:e,uuid:this.uuid},userChange:void 0})},t.prototype.destroy=function(){this.delta=void 0},t}(),f=r(1694),p=function(){return(p=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},h=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){t.done?o(t.value):new r((function(e){e(t.value)})).then(i,s)}u((n=n.apply(t,e||[])).next())}))},d=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},y=function(){function t(t){var e=this;this.onEditorChange=function(t){e.localFileSaver&&e.localFileSaver.set(t)},this.onCollabChange=function(t,r,n){if(t&&t.length){var o=new c(e.docType,t[0].changeset),a=t[0].rev;try{for(var i=1;i<t.length;i++)o.composeToSelf(new c(e.docType,t[i].changeset)),a=Math.max(a,t[i].rev);e.baseDelta.composeToSelf(o)}catch(t){e.onError(f.a.PULL_ERROR,t,r,n)}e.fileDataStorage.set(e.baseDelta.toString(),a)}},this.offlineDataStorage=new n.a({guid:t.guid,userId:t.userId,pageType:t.pageType,docType:t.docType,driver:t.storageDriver}),this.guid=t.guid,this.userId=t.userId,this.pageType=t.pageType,this.docType=t.docType,this.clientId=t.clientId||Object(a.v1)(),this.fileDataStorage=t.fileDataStorage,this.getRemoteContent=t.getRemoteContent,this.onError=t.onError||f.b,"-"===t.guid[0][0]&&(this.localFileSaver=new l({docType:this.docType,offlineDataStorage:this.offlineDataStorage,clientId:this.clientId}))}return t.prototype.getOfflineData=function(){return h(this,void 0,void 0,(function(){return d(this,(function(t){return[2,this.offlineDataStorage.get()]}))}))},t.prototype.getContent=function(t){return h(this,void 0,void 0,(function(){var e,r,o,a,i;return d(this,(function(s){switch(s.label){case 0:return[4,this.getBaseContent(t)];case 1:return(e=s.sent())&&e.content?(this.baseDelta=new c(this.docType,e.content),r=this.baseDelta.clone(),[4,this.offlineDataStorage.get()]):[2,null];case 2:if(!(o=s.sent()))return[2,p({offlineData:void 0},e)];if(!Object(n.e)(o.committingChange)){a=new c(this.docType,o.committingChange.delta);try{r.composeToSelf(a)}catch(t){this.onError(f.a.GET_CONTENT_ERROR,t),delete o.committingChange}this.localFileSaver&&o.committingChange&&this.localFileSaver.initWith(o.committingChange.delta)}if(!Object(n.e)(o.userChange)){i=new c(this.docType,o.userChange.delta);try{r.composeToSelf(i)}catch(t){this.onError(f.a.GET_CONTENT_ERROR,t),delete o.userChange}this.localFileSaver&&o.userChange&&this.localFileSaver.initWith(o.userChange.delta)}return[2,{head:e.head,content:r.toString(),pool:e.pool,offlineData:o}]}}))}))},t.prototype.subscribeContentChange=function(t,e){var r=this;if(!this.offlineDataStorage)return i.a;if(!e)return t.on(t.constructor.events.CHANGE,this.onEditorChange),function(){t.off(t.constructor.events.CHANGE,r.onEditorChange)};this.localFileSaver&&(this.localFileSaver.destroy(),this.localFileSaver=void 0,t.off(t.constructor.events.CHANGE,this.onEditorChange));var n=function(n){return r.onError(f.a.COLLAB_ERROR,n,t,e)};return e.on(o.Event.ERROR,n),this.fileDataStorage?(e.on(o.Event.CHANGES,this.onCollabChange),e.on(o.Event.ERROR,n),function(){e.off(o.Event.CHANGES,r.onCollabChange),e.off(o.Event.ERROR,n)}):function(){e.off(o.Event.ERROR,n)}},t.prototype.createStorage=function(){var t=this;return{set:function(e){return h(t,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return this.offlineDataStorage?Object(n.f)(e)?[4,this.offlineDataStorage.remove()]:[3,2]:[2];case 1:return t.sent(),[3,4];case 2:return[4,this.offlineDataStorage.set(e)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}}},t.prototype.pushLocalToRemote=function(t){return h(this,void 0,void 0,(function(){var e;return d(this,(function(r){switch(r.label){case 0:return this.guid=t,e=this.offlineDataStorage.driver,this.offlineDataStorage=new n.a({guid:this.guid,userId:this.userId,pageType:this.pageType,docType:this.docType,driver:e}),this.fileDataStorage?[4,this.fileDataStorage.changeGuid(t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getBaseContent=function(t,e){return void 0===e&&(e=!1),h(this,void 0,void 0,(function(){var r,n;return d(this,(function(o){switch(o.label){case 0:return!this.fileDataStorage||e?[3,2]:[4,this.fileDataStorage.get()];case 1:if((r=o.sent())&&r.content)return[2,r];o.label=2;case 2:return[4,this.getRemoteContent(this.guid,this.pageType,t)];case 3:return n=o.sent(),this.fileDataStorage&&n&&n.content&&this.fileDataStorage.set(n.content,n.head,n.pool),[2,n]}}))}))},t.prototype.removeOfflineData=function(){return h(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return this.offlineDataStorage?[4,this.offlineDataStorage.remove()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.removeFileData=function(){return h(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return this.fileDataStorage?[4,this.fileDataStorage.remove()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t}()},3199:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n,o=r(1517),a=r(2164),i=r(1673),s=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},u=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};!function(t){t[t.BOTH_PUSH_AND_PULL_SUCCESS=0]="BOTH_PUSH_AND_PULL_SUCCESS",t[t.PUSH_SUCCESS_BUT_PULL_FAILED=1]="PUSH_SUCCESS_BUT_PULL_FAILED",t[t.FAILED=2]="FAILED",t[t.FATAL=3]="FATAL",t[t.INVALID_AUTHORIZATION=4]="INVALID_AUTHORIZATION"}(n||(n={}));var c=function(){function t(t){this.pullFile=t.pullFile,this.pushFile=t.pushFile,this.logger=t.logger}return t.prototype.executeSyncTask=function(t){return s(this,void 0,void 0,(function(){var e,r,o,i;return u(this,(function(s){switch(s.label){case 0:if(e=Object(a.e)(t.committingChange)?"":t.committingChange.delta,r=Object(a.e)(t.userChange)?"":t.userChange.delta,o=!1,!e&&!r)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.pushFile({guid:t.guid,head:t.rev,committingCS:e,userCS:r,clientId:t.clientId,committingCSUuid:e?t.committingChange.uuid:"",userCSUuid:r?t.userChange.uuid:""})];case 2:return s.sent(),o=!0,[3,4];case 3:if(i=s.sent(),this.logger.error(i),i){if("Fatal Error"===i.message)return[2,n.FATAL];if("Server Error 401"===i.message||"Server Error 403"===i.message||"Server Error 404"===i.message)return[2,n.INVALID_AUTHORIZATION]}return[2,n.FAILED];case 4:return o&&this.pullFile?[4,this.pullFile(t.guid)]:[3,6];case 5:return[2,s.sent()?n.BOTH_PUSH_AND_PULL_SUCCESS:n.PUSH_SUCCESS_BUT_PULL_FAILED];case 6:return[2,n.BOTH_PUSH_AND_PULL_SUCCESS]}}))}))},t}(),l=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},f=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},p=function(){function t(t){this.fileSyncer=new c({pullFile:t.pullFile,pushFile:t.pushFile,logger:t.logger}),this.storageDriver=t.storageDriver,this.guid=t.guid,this.userId=t.userId}return t.prototype.execute=function(){return l(this,void 0,void 0,(function(){var t,e,r;return f(this,(function(s){switch(s.label){case 0:return t=Object(a.d)(this.guid,this.userId),[4,Object(i.a)(t,Object(o.v1)(),this.storageDriver)];case 1:return(e=s.sent())?[4,this.fileSyncer.executeSyncTask(e)]:[3,3];case 2:return r=s.sent(),[2,{error:[n.FAILED,n.FATAL,n.INVALID_AUTHORIZATION].indexOf(r)>-1,offlineData:e,hasAuthError:r===n.INVALID_AUTHORIZATION}];case 3:return[2,{error:!1,offlineData:null}]}}))}))},t.prototype.removeOfflineData=function(){return l(this,void 0,void 0,(function(){var t;return f(this,(function(e){return t=Object(a.d)(this.guid,this.userId),[2,this.storageDriver.remove(t)]}))}))},t}()}}]);